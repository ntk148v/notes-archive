<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/notes/styles.34c1555eaf028a1bf318.css" id="gatsby-global-css">.tippy-box[data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=top]{transform:translateY(10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=bottom]{transform:translateY(-10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=left]{transform:translateX(10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=right]{transform:translateX(-10px)}</style><meta name="generator" content="Gatsby 3.2.0"/><link as="script" rel="preload" href="/notes/webpack-runtime-6ab9c6bdeef07b34c110.js"/><link as="script" rel="preload" href="/notes/framework-544fcf5a97337ccb1485.js"/><link as="script" rel="preload" href="/notes/app-180b2c4c68d8cb58bd57.js"/><link as="script" rel="preload" href="/notes/component---node-modules-gatsby-theme-andy-src-templates-note-js-f60ab987f54412c8d336.js"/><link as="fetch" rel="preload" href="/notes/page-data/prometheus-alertmanager-bot-readme/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/notes/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="n0ecfm">body{color:var(--theme-ui-colors-text,#333);background-color:var(--theme-ui-colors-background,#fff);}</style><style data-emotion-css="1fthmpb">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;line-height:1.5;font-weight:400;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="bya3fr">.css-bya3fr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;min-height:100vh;}</style><style data-emotion-css="1ehwac2">.css-1ehwac2{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;min-height:100vh;}</style><div class="css-1ehwac2"><header><style data-emotion-css="b38cxh">.css-b38cxh{border-bottom:1px solid;border-color:var(--theme-ui-colors-gray,#dadada);}</style><style data-emotion-css="bjpuxf">.css-bjpuxf{box-sizing:border-box;margin:0;min-width:0;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;border-bottom:1px solid;border-color:var(--theme-ui-colors-gray,#dadada);}</style><div class="css-bjpuxf"><style data-emotion-css="12j45zb">.css-12j45zb{font-weight:700;color:var(--theme-ui-colors-text,#333);-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-12j45zb" href="/notes/">@kiennt&#x27;s notes</a></div></header><style data-emotion-css="lxqeq9">.css-lxqeq9{-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-y:hidden;}@media screen and (min-width:768px){.css-lxqeq9{overflow-x:auto;}}</style><style data-emotion-css="1xopae2">.css-1xopae2{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-y:hidden;}@media screen and (min-width:768px){.css-1xopae2{overflow-x:auto;}}</style><div class="css-1xopae2"><style data-emotion-css="9ms8w3">.css-9ms8w3{min-width:unset;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition-duration:100px;transition-duration:100px;width:100%;}@media screen and (min-width:640px){.css-9ms8w3{width:100%;}}@media screen and (min-width:768px){.css-9ms8w3{-webkit-transition:width;transition:width;width:1152px;}}</style><style data-emotion-css="1806l1h">.css-1806l1h{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:unset;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition-duration:100px;transition-duration:100px;width:100%;}@media screen and (min-width:640px){.css-1806l1h{width:100%;}}@media screen and (min-width:768px){.css-1806l1h{-webkit-transition:width;transition:width;width:1152px;}}</style><div class="note-columns-container css-1806l1h"><style data-emotion-css="q7ai65">.css-q7ai65{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;max-width:100%;width:100%;left:0;right:-585px;}@media screen and (min-width:640px){.css-q7ai65{max-width:100%;width:100%;}}@media screen and (min-width:768px){.css-q7ai65{position:-webkit-sticky;position:sticky;max-width:100vw;width:576px;}}</style><style data-emotion-css="108dckd">.css-108dckd{box-sizing:border-box;margin:0;min-width:0;padding-left:16px;padding-right:16px;background-color:var(--theme-ui-colors-background,#fff);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;max-width:100%;width:100%;left:0;right:-585px;}@media screen and (min-width:640px){.css-108dckd{max-width:100%;width:100%;}}@media screen and (min-width:768px){.css-108dckd{position:-webkit-sticky;position:sticky;max-width:100vw;width:576px;}}</style><div class="note-container css-108dckd"><style data-emotion-css="qkbcne">.css-qkbcne{display:none;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:0;}@media screen and (min-width:640px){.css-qkbcne{display:none;}}@media screen and (min-width:768px){.css-qkbcne{display:block;}}</style><style data-emotion-css="1d4xrqf">.css-1d4xrqf{box-sizing:border-box;margin:0;min-width:0;display:none;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:0;}@media screen and (min-width:640px){.css-1d4xrqf{display:none;}}@media screen and (min-width:768px){.css-1d4xrqf{display:block;}}</style><div class="css-1d4xrqf"><style data-emotion-css="1557ki8">.css-1557ki8{position:absolute;z-index:10;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;}</style><style data-emotion-css="1vxydnz">.css-1vxydnz{box-sizing:border-box;margin:0;min-width:0;padding-bottom:8px;position:absolute;z-index:10;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;}</style><div class="css-1vxydnz"><style data-emotion-css="y5zp6v">.css-y5zp6v{font-weight:700;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text,#333);}</style><a class="css-y5zp6v" href="/notes/prometheus-alertmanager-bot-readme/prometheus-alertmanager-bot-readme">prometheus-alertmanager-bot-readme</a></div></div><style data-emotion-css="1jnayfl">.css-1jnayfl{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100%;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:1;}</style><style data-emotion-css="1xvlbb1">.css-1xvlbb1{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100%;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:1;}</style><div class="css-1xvlbb1"><style data-emotion-css="1rr4qq7">.css-1rr4qq7{-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="css-1rr4qq7"><style data-emotion-css="1ebprri">.css-1ebprri{margin-top:16px;margin-bottom:16px;}</style><style data-emotion-css="xz3bt">.css-xz3bt{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;margin-top:16px;margin-bottom:16px;}</style><h1 class="css-xz3bt">prometheus-alertmanager-bot-readme</h1><style data-emotion-css="1ccy11i">.css-1ccy11i{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;}</style><h1 class="css-1ccy11i">Bot for Prometheus&#x27; Alertmanager <style data-emotion-css="18ci6ln">.css-18ci6ln{color:#3182ce;-webkit-text-decoration:none;text-decoration:none;}.css-18ci6ln:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-18ci6ln" href="https://cloud.drone.io/metalmatze/alertmanager-bot"><style data-emotion-css="1k89gbo">.css-1k89gbo{max-width:100%;max-width:100%;}</style><img src="https://cloud.drone.io/api/badges/metalmatze/alertmanager-bot/status.svg" alt="Build Status" class="css-1k89gbo"/></a></h1><style data-emotion-css="19iowwu">.css-19iowwu{color:#333;color:#333;}</style><p class="css-19iowwu"><a class="css-18ci6ln" href="https://hub.docker.com/r/metalmatze/alertmanager-bot"><img src="https://img.shields.io/docker/pulls/metalmatze/alertmanager-bot.svg?maxAge=604800" alt="Docker Pulls" class="css-1k89gbo"/></a>
<a class="css-18ci6ln" href="https://goreportcard.com/report/github.com/metalmatze/alertmanager-bot"><img src="https://goreportcard.com/badge/github.com/metalmatze/alertmanager-bot" alt="Go Report Card" class="css-1k89gbo"/></a></p><p class="css-19iowwu">This is the <a class="css-18ci6ln" href="https://prometheus.io/docs/alerting/alertmanager/">Alertmanager</a> bot for
<a class="css-18ci6ln" href="https://prometheus.io/">Prometheus</a> that notifies you on alerts.<br/>
<!-- -->Just configure the Alertmanager to send Webhooks to the bot and that&#x27;s it.</p><p class="css-19iowwu">Additionally you can always <strong class="css-0">send commands</strong> to get up-to-date information from the alertmanager.</p><style data-emotion-css="jgtg8i">.css-jgtg8i{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:20px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:20px;}</style><h3 class="css-jgtg8i">Why?</h3><p class="css-19iowwu">Alertmanager already integrates a lot of different messengers as receivers for alerts.<br/>
<!-- -->I want to extend this basic functionality.</p><p class="css-19iowwu">Previously the Alertmanager could only talk to you via a chat, but now you can talk back via <style data-emotion-css="embvvb">.css-embvvb{color:#3182ce;padding-left:2px;padding-right:2px;margin-left:-2px;margin-right:-2px;border-radius:4px;color:#3182ce;-webkit-text-decoration:none;text-decoration:none;}.css-embvvb:hover{background-color:#fafafc;}.css-embvvb:focus{background-color:#fafafc;}.css-embvvb:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#commands">commands</a>.<br/>
<!-- -->You can ask about current ongoing <a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#alerts">alerts</a> and <a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#silences">silences</a>.<br/>
<!-- -->In the future I plan to also support silencing via the chat, so you can silences after getting an alert from within the chat.<br/>
<!-- -->A lot of other things can be added!</p><style data-emotion-css="cq6ij1">.css-cq6ij1{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:24px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:24px;}</style><h2 class="css-cq6ij1">Messengers</h2><p class="css-19iowwu">Right now it supports <a class="css-18ci6ln" href="https://telegram.org/">Telegram</a>, but I&#x27;d like to <a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#more-messengers">add more</a> in the future.</p><h2 class="css-cq6ij1">Commands</h2><style data-emotion-css="1nnvohi">.css-1nnvohi{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:12px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:12px;}</style><h6 class="css-1nnvohi">/start</h6><blockquote class="css-0"><p class="css-19iowwu">Hey, Matthias! I will now keep you up to date!<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#help">/help</a></p></blockquote><h6 class="css-1nnvohi">/stop</h6><blockquote class="css-0"><p class="css-19iowwu">Alright, Matthias! I won&#x27;t talk to you again.<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#help">/help</a></p></blockquote><h6 class="css-1nnvohi">/alerts</h6><blockquote class="css-0"><p class="css-19iowwu">ðŸ”¥ <strong class="css-0">FIRING</strong> ðŸ”¥<br/>
<strong class="css-0">NodeDown</strong> (Node scraper.krautreporter:8080 down)<br/>
<!-- -->scraper.krautreporter:8080 has been down for more than 1 minute.<br/>
<strong class="css-0">Started</strong>: 1 week 2 days 3 hours 50 minutes 42 seconds ago  </p><p class="css-19iowwu">ðŸ”¥ <strong class="css-0">FIRING</strong> ðŸ”¥
<strong class="css-0">monitored_service_down</strong> (MONITORED SERVICE DOWN)
The monitoring service &#x27;digitalocean-exporter&#x27; is down.
<strong class="css-0">Started</strong>: 10 seconds ago</p></blockquote><h6 class="css-1nnvohi">/silences</h6><blockquote class="css-0"><p class="css-19iowwu">NodeDown ðŸ”•<br/>
<code class="css-0">job=&quot;ranch-eye&quot; monitor=&quot;exporter-metrics&quot; severity=&quot;page&quot;</code><br/>
<strong class="css-0">Started</strong>: 1 month 1 week 5 days 8 hours 27 minutes 57 seconds ago<br/>
<strong class="css-0">Ends</strong>: -11 months 2 weeks 2 days 19 hours 15 minutes 24 seconds  </p><p class="css-19iowwu">RancherServiceState ðŸ”•<br/>
<code class="css-0">job=&quot;rancher&quot; monitor=&quot;exporter-metrics&quot; name=&quot;scraper&quot; rancherURL=&quot;http://rancher.example.com/v1&quot; severity=&quot;page&quot; state=&quot;inactive&quot;</code><br/>
<strong class="css-0">Started</strong>: 1 week 2 days 3 hours 46 minutes 21 seconds ago<br/>
<strong class="css-0">Ends</strong>: -3 weeks 1 day 13 minutes 24 seconds  </p></blockquote><h6 class="css-1nnvohi">/chats</h6><blockquote class="css-0"><p class="css-19iowwu">Currently these chat have subscribed:
@MetalMatze</p></blockquote><h6 class="css-1nnvohi">/status</h6><blockquote class="css-0"><p class="css-19iowwu"><strong class="css-0">AlertManager</strong><br/>
<!-- -->Version: 0.5.1<br/>
<!-- -->Uptime: 3 weeks 1 day 6 hours 15 minutes 2 seconds<br/>
<strong class="css-0">AlertManager Bot</strong><br/>
<!-- -->Version: 0.4.0<br/>
<!-- -->Uptime: 3 weeks 1 hour 17 minutes 19 seconds  </p></blockquote><h6 class="css-1nnvohi">/help</h6><blockquote class="css-0"><p class="css-19iowwu">I&#x27;m a Prometheus AlertManager Bot for Telegram. I will notify you about alerts.<br/>
<!-- -->You can also ask me about my <a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#status">/status</a>, <a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#alerts">/alerts</a> &amp; <a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#silences">/silences</a>  </p><p class="css-19iowwu">Available commands:<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#start">/start</a> - Subscribe for alerts.<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#stop">/stop</a> - Unsubscribe for alerts.<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#status">/status</a> - Print the current status.<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#alerts">/alerts</a> - List all alerts.<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#silences">/silences</a> - List all silences.<br/>
<a class="css-embvvb" href="/notes/prometheus-alertmanager-bot-readme/#chats">/chats</a> - List all users and group chats that subscribed.</p></blockquote><h2 class="css-cq6ij1">Installation</h2><h3 class="css-jgtg8i">Docker</h3><p class="css-19iowwu"><code class="css-0">docker pull metalmatze/alertmanager-bot:0.4.0</code></p><p class="css-19iowwu">Start as a command:</p><style data-emotion-css="1xn2679">.css-1xn2679{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:16px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:16px;}</style><h4 class="css-1xn2679">Bolt Storage</h4><style data-emotion-css="mwhsaa">.css-mwhsaa{font-family:Menlo,monospace;overflow-x:auto;font-family:Menlo,monospace;overflow-x:auto;}.css-mwhsaa code{color:inherit;}.css-mwhsaa code{color:inherit;}</style><pre class="css-mwhsaa"><style data-emotion-css="tej46y">.css-tej46y{font-family:Menlo,monospace;font-size:inherit;font-family:Menlo,monospace;font-size:inherit;}</style><code class="language-bash css-tej46y">docker run -d \
    -e &#x27;ALERTMANAGER_URL=http://alertmanager:9093&#x27; \
    -e &#x27;BOLT_PATH=/data/bot.db&#x27; \
    -e &#x27;STORE=bolt&#x27; \
    -e &#x27;TELEGRAM_ADMIN=1234567&#x27; \
    -e &#x27;TELEGRAM_TOKEN=XXX&#x27; \
    -v &#x27;/srv/monitoring/alertmanager-bot:/data&#x27; \
    --name alertmanager-bot \
    metalmatze/alertmanager-bot:0.4.0
</code></pre><h4 class="css-1xn2679">Consul Storage</h4><pre class="css-mwhsaa"><code class="language-bash css-tej46y">docker run -d \
    -e &#x27;ALERTMANAGER_URL=http://alertmanager:9093&#x27; \
    -e &#x27;CONSUL_URL=localhost:8500&#x27; \
    -e &#x27;STORE=consul&#x27; \
    -e &#x27;TELEGRAM_ADMIN=1234567&#x27; \
    -e &#x27;TELEGRAM_TOKEN=XXX&#x27; \
    --name alertmanager-bot \
    metalmatze/alertmanager-bot:0.4.0
</code></pre><p class="css-19iowwu">Usage within docker-compose:</p><pre class="css-mwhsaa"><code class="language-yml css-tej46y">alertmanager-bot:
  image: metalmatze/alertmanager-bot:0.4.0
  environment:
    ALERTMANAGER_URL: http://alertmanager:9093
    BOLT_PATH: /data/bot.db
    STORE: bolt
    TELEGRAM_ADMIN: &#x27;1234567&#x27;
    TELEGRAM_TOKEN: XXX
    TEMPLATE_PATHS: /templates/default.tmpl
  volumes:
  - /srv/monitoring/alertmanager-bot:/data
</code></pre><h3 class="css-jgtg8i">Ansible</h3><p class="css-19iowwu">If you prefer using configuration management systems (like Ansible) you might be interested in the following role:  <a class="css-18ci6ln" href="https://github.com/mbaran0v/ansible-role-alertmanager-bot">mbaran0v.alertmanager-bot</a></p><h3 class="css-jgtg8i">Build from source</h3><p class="css-19iowwu"><code class="css-0">GO111MODULE=on go get github.com/metalmatze/alertmanager-bot/cmd/alertmanager-bot</code></p><h3 class="css-jgtg8i">Configuration</h3><style data-emotion-css="753nho">.css-753nho{width:100%;border-collapse:separate;border-spacing:0;width:100%;border-collapse:separate;border-spacing:0;}</style><table class="css-753nho"><thead><tr class="css-0"><style data-emotion-css="1av8mni">.css-1av8mni{text-align:left;border-bottom-style:solid;text-align:left;border-bottom-style:solid;}</style><th class="css-1av8mni">ENV Variable</th><th class="css-1av8mni">Description</th></tr></thead><tbody><tr class="css-0"><td class="css-1av8mni">ALERTMANAGER_URL</td><td class="css-1av8mni">Address of the alertmanager, default: <code class="css-0">http://localhost:9093</code></td></tr><tr class="css-0"><td class="css-1av8mni">BOLT_PATH</td><td class="css-1av8mni">Path on disk to the file where the boltdb is stored, default: <code class="css-0">/tmp/bot.db</code></td></tr><tr class="css-0"><td class="css-1av8mni">CONSUL_URL</td><td class="css-1av8mni">The URL to use to connect with Consul, default: <code class="css-0">localhost:8500</code></td></tr><tr class="css-0"><td class="css-1av8mni">LISTEN_ADDR</td><td class="css-1av8mni">Address that the bot listens for webhooks, default: <code class="css-0">0.0.0.0:8080</code></td></tr><tr class="css-0"><td class="css-1av8mni">STORE</td><td class="css-1av8mni">The type of the store to use, choose from bolt (local) or consul (distributed)</td></tr><tr class="css-0"><td class="css-1av8mni">TELEGRAM_ADMIN</td><td class="css-1av8mni">The Telegram user id for the admin. The bot will only reply to messages sent from an admin. All other messages are dropped and logged on the bot&#x27;s console.</td></tr><tr class="css-0"><td class="css-1av8mni">TELEGRAM_TOKEN</td><td class="css-1av8mni">Token you get from <a class="css-18ci6ln" href="https://telegram.me/botfather">@botfather</a></td></tr><tr class="css-0"><td class="css-1av8mni">TEMPLATE_PATHS</td><td class="css-1av8mni">Path to custom message templates, default template is <code class="css-0">./default.tmpl</code>, in docker - <code class="css-0">/templates/default.tmpl</code></td></tr></tbody></table><h4 class="css-1xn2679">Authentication</h4><p class="css-19iowwu">Additional users may be allowed to command the bot by giving multiple instances
of the <code class="css-0">--telegram.admin</code> command line option or by specifying a
newline-separated list of telegram user IDs in the <code class="css-0">TELEGRAM_ADMIN</code> environment
variable.</p><pre class="css-mwhsaa"><code class="css-tej46y">- TELEGRAM_ADMIN=&quot;**********\n************&quot;
--telegram.admin=1 --telegram.admin=2
</code></pre><h4 class="css-1xn2679">Alertmanager Configuration</h4><p class="css-19iowwu">Now you need to connect the Alertmanager to send alerts to the bot.<br/>
<!-- -->A webhook is used for that, so make sure your <code class="css-0">LISTEN_ADDR</code> is reachable for the Alertmanager.</p><p class="css-19iowwu">For example add this to your <code class="css-0">alertmanager.yml</code> configuration:</p><pre class="css-mwhsaa"><code class="language-yaml css-tej46y">receivers:
- name: &#x27;alertmananger-bot&#x27;
  webhook_configs:
  - send_resolved: true
    url: &#x27;http://alertmanager-bot:8080&#x27;
</code></pre><h2 class="css-cq6ij1">Development</h2><p class="css-19iowwu">Get all dependencies. We use <a class="css-18ci6ln" href="https://github.com/golang/dep">golang/dep</a>.<br/>
<!-- -->Fetch all dependencies with:</p><pre class="css-mwhsaa"><code class="css-tej46y">dep ensure -v -vendor-only
</code></pre><p class="css-19iowwu">Build the binary using <code class="css-0">make</code>:</p><pre class="css-mwhsaa"><code class="css-tej46y">make install
</code></pre><p class="css-19iowwu">In case you have <code class="css-0">$GOPATH/bin</code> in your <code class="css-0">$PATH</code> you can now simply start the bot by running:</p><pre class="css-mwhsaa"><code class="language-bash css-tej46y">alertmanager-bot
</code></pre><h2 class="css-cq6ij1">Missing</h2><style data-emotion-css="1a55vzp">.css-1a55vzp{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:14px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:14px;}</style><h5 class="css-1a55vzp">Commands</h5><ul class="css-0"><li class="css-0"><code class="css-0">/silence</code> - show a specific silence  </li><li class="css-0"><code class="css-0">/silence_del</code> - delete a silence by command  </li><li class="css-0"><code class="css-0">/silence_add</code> - add a silence for a alert by command</li></ul><h5 class="css-1a55vzp">More Messengers</h5><p class="css-19iowwu">At the moment I only implemented Telegram, because it&#x27;s so freakin&#x27; easy to do.</p><p class="css-19iowwu">Messengers considered to add in the future:</p><ul class="css-0"><li class="css-0"><a class="css-18ci6ln" href="https://slack.com/">Slack</a></li><li class="css-0"><a class="css-18ci6ln" href="https://about.mattermost.com/">Mattermost</a></li><li class="css-0"><a class="css-18ci6ln" href="https://matrix.org/">Matrix</a></li></ul><p class="css-19iowwu">If one is missing for you just open an issue.</p></div><style data-emotion-css="rl6otz">.css-rl6otz{border-radius:8px;}</style><style data-emotion-css="19qk7ja">.css-19qk7ja{box-sizing:border-box;margin:0;min-width:0;padding:16px;margin-bottom:8px;background-color:#fafafc;color:#718096;border-radius:8px;}</style><div class="css-19qk7ja"><style data-emotion-css="rp57em">.css-rp57em{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.125;color:#718096;}</style><h4 class="css-rp57em">Referred in</h4><style data-emotion-css="19idom">.css-19idom{margin-bottom:8px;}</style><div class="css-19idom"><style data-emotion-css="ovwx2x">.css-ovwx2x{-webkit-text-decoration:none;text-decoration:none;color:#718096;}.css-ovwx2x:hover{color:#333;}</style><a class="css-ovwx2x" href="/notes/about"><style data-emotion-css="1jpm9pd">.css-1jpm9pd{padding-top:8px;padding-bottom:8px;}</style><div class="css-1jpm9pd"><style data-emotion-css="18iut6x">.css-18iut6x{font-size:16px;margin:0;color:#718096;}</style><style data-emotion-css="ouorfz">.css-ouorfz{color:#333;font-size:16px;margin:0;color:#718096;}</style><p class="css-ouorfz">About these notes</p><style data-emotion-css="uvfa58">.css-uvfa58{font-size:14px;margin:0;color:#718096;}</style><style data-emotion-css="1hddlwb">.css-1hddlwb{color:#333;font-size:14px;margin:0;color:#718096;}</style><p class="css-1hddlwb">Hi, I&#x27;m  Kien Nguyen-Tuan  ðŸ‘‹. prometheus-promql-gotchas prometheus-prometheus-promql-join prometheus-prometheus-labels-relabel prometheusâ€¦</p></div></a></div><style data-emotion-css="4erca1">.css-4erca1{margin-left:auto;margin-right:auto;width:64px;}</style><hr class="css-4erca1"/><style data-emotion-css="1cev0y9">.css-1cev0y9{margin:0;font-size:14px;}</style><p class="css-1cev0y9">If you think this note resonated, be it positive or negative, please feel free to send me an<!-- --> <style data-emotion-css="15vz5gh">.css-15vz5gh{-webkit-text-decoration:underline;text-decoration:underline;color:#718096;}</style><style data-emotion-css="lnu7pe">.css-lnu7pe{color:#3182ce;-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration:underline;text-decoration:underline;color:#718096;}.css-lnu7pe:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="mailto:kiennt2609@gmail.com" class="css-lnu7pe">email</a> <!-- -->and we can talk.</p></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/prometheus-alertmanager-bot-readme";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-534f3e0c52e5660f4540.js"],"app":["/app-180b2c4c68d8cb58bd57.js"],"component---node-modules-gatsby-theme-andy-src-templates-note-js":["/component---node-modules-gatsby-theme-andy-src-templates-note-js-f60ab987f54412c8d336.js"]};/*]]>*/</script><script src="/notes/polyfill-534f3e0c52e5660f4540.js" nomodule=""></script><script src="/notes/component---node-modules-gatsby-theme-andy-src-templates-note-js-f60ab987f54412c8d336.js" async=""></script><script src="/notes/app-180b2c4c68d8cb58bd57.js" async=""></script><script src="/notes/framework-544fcf5a97337ccb1485.js" async=""></script><script src="/notes/webpack-runtime-6ab9c6bdeef07b34c110.js" async=""></script></body></html>